(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{188:function(a,t,e){"use strict";e.r(t);var r=e(0),s=Object(r.a)({},function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"_12-canvas图片处理之黑白、反向（附演示及源码）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_12-canvas图片处理之黑白、反向（附演示及源码）","aria-hidden":"true"}},[a._v("#")]),a._v(" 12. Canvas图片处理之黑白、反向（附演示及源码）")]),a._v(" "),e("h2",{attrs:{id:"_1-前-言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-前-言","aria-hidden":"true"}},[a._v("#")]),a._v(" 1 前 言")]),a._v(" "),e("h3",{attrs:{id:"_1-1-预览图"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-预览图","aria-hidden":"true"}},[a._v("#")]),a._v(" 1.1 预览图")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://github.com/xrkffgg/Kimg/blob/master/blog/12-1.gif?raw=true",alt:""}})]),a._v(" "),e("h2",{attrs:{id:"_2-实-现"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-实-现","aria-hidden":"true"}},[a._v("#")]),a._v(" 2 实 现")]),a._v(" "),e("p",[a._v("本例使用：")]),a._v(" "),e("ul",[e("li",[a._v("Vue")]),a._v(" "),e("li",[a._v("element-ui")])]),a._v(" "),e("h3",{attrs:{id:"_2-1-画-图"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-画-图","aria-hidden":"true"}},[a._v("#")]),a._v(" 2.1 画 图")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('\x3c!--canvas 定义--\x3e\n<canvas id="canvas01" width="400" height="400"></canvas>\n')])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("//  vue 生命周期\nmounted(){\n    this.drawCanvas()\n},\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("drawCanvas(){\n    var cav = document.getElementById('canvas01')\n    var ctx = cav.getContext('2d')\n    var img = new Image()\n    img.crossOrigin = 'anonymous'\n    // 这里的 url 指向了 我 GitHub 头像地址\n    img.src = this.url + '?time=' + new Date().getTime()\n    img.onload = () =>{\n        if(img.complete){\n            ctx.drawImage(img,0,0,img.width,img.height)\n            setTimeout(() =>{\n                // 保存原始像素信息\n                this.imagePixels = [...ctx.getImageData(0,0,cav.width,cav.height).data]\n            },1)\n        }\n    }\n}\n")])])]),e("p",[e("strong",[a._v("注意：")])]),a._v(" "),e("ul",[e("li",[a._v("canvas 须设置 "),e("code",[a._v("width")]),a._v(" "),e("code",[a._v("height")])]),a._v(" "),e("li",[a._v("若你的项目中，有多个 "),e("code",[a._v("canvas")]),a._v(" 画图，注意 "),e("code",[a._v("id")]),a._v(" 定义要不同")]),a._v(" "),e("li",[a._v("生命钩子不能使用 "),e("code",[a._v("created()")])]),a._v(" "),e("li",[e("code",[a._v("img.crossOrigin")]),a._v(" "),e("code",[a._v("img.src ?time=")]),a._v(" 是为了解决 图片跨域的问题")]),a._v(" "),e("li",[a._v("为不影响图片渲染，保存像素信息的动作，放在异步中执行")])]),a._v(" "),e("blockquote",[e("p",[a._v("若只是用 "),e("code",[a._v("canvas")]),a._v(" 画图，则不存在跨域问题，这里的定义是因为要获取像素信息")])]),a._v(" "),e("h3",{attrs:{id:"_2-2-黑-白"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-黑-白","aria-hidden":"true"}},[a._v("#")]),a._v(" 2.2 黑 白")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("var cav = document.getElementById('canvas01')\nvar ctx = cav.getContext('2d')\nlet imageData = ctx.getImageData(0,0,cav.width,cav.height)\nlet pixels = imageData.data\n\n// 处理像素点\nfor (let i=0; i<pixels.length; i+=4){\n    let r = pixels[i]\n    let g = pixels[i+1]\n    let b = pixels[i+2]\n\n    // 灰色\n    let gray = parseInt((r+g+b)/3)\n    imageData.data[i] = gray\n    imageData.data[i+1] = gray\n    imageData.data[i+2] = gray\n}\n// 重新画图\nctx.putImageData(imageData, 0,0)\n")])])]),e("h3",{attrs:{id:"_2-3-其他"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-其他","aria-hidden":"true"}},[a._v("#")]),a._v(" 2.3 其他")]),a._v(" "),e("p",[e("strong",[a._v("彩色：")]),a._v(" 用相同的方法，将之前保存的原始像素恢复回去")]),a._v(" "),e("p",[e("strong",[a._v("反向：")]),a._v(" 255 - 原值")]),a._v(" "),e("blockquote",[e("p",[a._v("还有很多的图片处理，是将图片的 "),e("code",[a._v("r")]),a._v(" "),e("code",[a._v("g")]),a._v(" "),e("code",[a._v("b")]),a._v(" 进行不同处理")])]),a._v(" "),e("h2",{attrs:{id:"_3-后-记"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-后-记","aria-hidden":"true"}},[a._v("#")]),a._v(" 3 后 记")]),a._v(" "),e("p",[e("strong",[a._v("感谢支持。若不足之处，欢迎大家指出，共勉。")])]),a._v(" "),e("p",[e("strong",[a._v("如果觉得不错，记得 点赞，谢谢大家")]),a._v(" 😂")]),a._v(" "),e("blockquote",[e("p",[e("strong",[a._v("欢迎关注 我的：")]),a._v(" "),e("a",{attrs:{href:"https://github.com/xrkffgg",target:"_blank",rel:"noopener noreferrer"}},[a._v("GitHub"),e("OutboundLink")],1),a._v(" "),e("a",{attrs:{href:"https://juejin.im/user/59c369496fb9a00a4843a3e2",target:"_blank",rel:"noopener noreferrer"}},[a._v("掘 金"),e("OutboundLink")],1),a._v(" "),e("a",{attrs:{href:"https://www.jianshu.com/u/4ca4daac5890",target:"_blank",rel:"noopener noreferrer"}},[a._v("简 书"),e("OutboundLink")],1)])]),a._v(" "),e("h3",{attrs:{id:"_3-1-演示地址"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-演示地址","aria-hidden":"true"}},[a._v("#")]),a._v(" 3.1 演示地址")]),a._v(" "),e("p",[a._v("https://xrkffgg.github.io/Kvue/#/Canvas/001")]),a._v(" "),e("h3",{attrs:{id:"_3-2-源-码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-源-码","aria-hidden":"true"}},[a._v("#")]),a._v(" 3.2 源 码")]),a._v(" "),e("p",[a._v("https://github.com/xrkffgg/Kvue/blob/master/src/components/canvasCom/001.vue")])])},[],!1,null,null,null);t.default=s.exports}}]);